<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Servicio al Cliente - MS</title>
    <!-- Enlace a los estilos especÃ­ficos del chat -->
    <link rel="stylesheet" href="chat_styles.css">
    <!-- FontAwesome para iconos (aviÃ³n de papel, robot) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
 <link rel="stylesheet" href="chatbot.css">
</head>
<body>

    <header class="chat-header">
        <a href="tienda virtual.html" class="back-link"><i class="fas fa-arrow-left"></i> Volver a la Tienda</a>
        <h1>MS - Soporte Virtual</h1>
    </header>

    <main class="chat-layout">
        <section class="chat-intro">
            <h2>Â¿En quÃ© podemos ayudarte?</h2>
            <p>Nuestro asistente virtual estÃ¡ disponible 24/7 para resolver tus dudas sobre productos, envÃ­os y garantÃ­as.</p>
            <div class="status-indicator">
                <span class="dot"></span> En lÃ­nea
            </div>
        </section>

        <section class="chat-interface">
            <!-- Ãrea de mensajes -->
            <div class="chat-window" id="chatWindow">
                <div class="message bot-message">
                    <div class="avatar"><i class="fas fa-robot"></i></div>
                    <div class="text">
                        Hola, bienvenido a <strong>Multi Service (MS)</strong>. Soy tu asistente virtual. <br><br>
                        Â¿En quÃ© puedo ayudarte hoy?
                    </div>
                </div>
                <!-- Sugerencias de preguntas (Sugerencia implementada) -->
                <div class="quick-actions">
                    <button onclick="sendQuickMessage('Â¿Hacen envÃ­os?')">ğŸšš EnvÃ­os</button>
                    <button onclick="sendQuickMessage('Â¿QuÃ© mÃ©todos de pago aceptan?')">ğŸ’³ Pagos</button>
                    <button onclick="sendQuickMessage('Â¿DÃ³nde estÃ¡n ubicados?')">ğŸ“ UbicaciÃ³n</button>
                    <button onclick="sendQuickMessage('Quiero hablar con un humano')">ğŸ‘¤ Asesor</button>
                </div>
            </div>

            <!-- Ãrea de escritura -->
            <div class="chat-input-area">
                <input type="text" id="userInput" placeholder="Escribe tu consulta aquÃ­..." onkeypress="handleEnter(event)">
                <button onclick="sendMessage()" id="sendBtn"><i class="fas fa-paper-plane"></i></button>
            </div>
        </section>
    </main>

    <script>
        const chatWindow = document.getElementById('chatWindow');
        const userInput = document.getElementById('userInput');

        // Manejar tecla Enter
        function handleEnter(event) {
            if (event.key === 'Enter') sendMessage();
        }

        // Enviar mensaje rÃ¡pido desde botones
        function sendQuickMessage(text) {
            userInput.value = text;
            sendMessage();
        }

        // FunciÃ³n principal para enviar mensaje
        function sendMessage() {
            const text = userInput.value.trim();
            if (text === "") return;

            // 1. Agregar mensaje del usuario
            addMessage(text, 'user-message');
            userInput.value = '';

            // 2. Simular "escribiendo..." y responder
            setTimeout(() => {
                const response = getBotResponse(text.toLowerCase());
                addMessage(response, 'bot-message');
            }, 600); // Retraso de 0.6 segundos para realismo
        }

        // FunciÃ³n para agregar burbujas al chat
        function addMessage(text, className) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', className);

            let avatarHTML = '';
            if (className === 'bot-message') {
                avatarHTML = '<div class="avatar"><i class="fas fa-robot"></i></div>';
            }

            messageDiv.innerHTML = `
                ${avatarHTML}
                <div class="text">${text}</div>
            `;

            // Insertar antes de los botones de acciÃ³n rÃ¡pida si existen, o al final
            const quickActions = document.querySelector('.quick-actions');
            if(quickActions) {
                chatWindow.insertBefore(messageDiv, quickActions);
            } else {
                chatWindow.appendChild(messageDiv);
            }
            
            // Auto-scroll hacia abajo
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        // ğŸ§  CEREBRO DEL CHATBOT (LÃ³gica de respuestas)
        function getBotResponse(input) {
            // LÃ³gica simple de palabras clave
            if (input.includes('hola') || input.includes('buenos') || input.includes('saludos')) {
                return "Â¡Hola! Â¿CÃ³mo estÃ¡s? Espero que encuentres lo que buscas en MS.";
            } 
            else if (input.includes('envio') || input.includes('envÃ­o') || input.includes('delivery')) {
                return "Realizamos envÃ­os a todo el paÃ­s ğŸ‡©ğŸ‡´. El costo depende de tu ubicaciÃ³n. En compras mayores a $2,000.";
            } 
            else if (input.includes('precio') || input.includes('cuesta') || input.includes('valor')) {
                return "Los precios estÃ¡n marcados en cada producto de la tienda. Si buscas algo especÃ­fico, puedes usar la barra de bÃºsqueda en la pÃ¡gina principal.";
            } 
            else if (input.includes('pago') || input.includes('tarjeta') || input.includes('transferencia')) {
                return "Aceptamos efectivo ğŸ’µ, transferencia bancaria y tarjetas de crÃ©dito/dÃ©bito (Visa y MasterCard).";
            } 
            else if (input.includes('ubicacion') || input.includes('ubicaciÃ³n') || input.includes('donde estan') || input.includes('direcciÃ³n')) {
                return "Estamos ubicados en Calle palo hincado las Malvinas a lado de la ferreterÃ­a welinto";
            } 
            else if (input.includes('humano') || input.includes('persona') || input.includes('asesor')) {
                return "Entiendo. Puedes contactar a nuestro soporte humano directamente al WhatsApp: +1 (809) 351-8848 ğŸ“.";
            } 
            else if (input.includes('gracias')) {
                return "Â¡De nada! Estamos para servirte en MS.";
            } 
            else {
                return "Lo siento, no entendÃ­ bien tu pregunta. Â¿PodrÃ­as intentar con palabras clave como 'envÃ­os', 'pagos' o 'ubicaciÃ³n'?";
            }
        }
    </script>
</body>
</html>